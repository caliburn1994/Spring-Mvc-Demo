/*
 * This file was generated by the Gradle 'init' task.
 *
 * This is a general purpose Gradle build.
 * Learn more about Gradle by exploring our samples at https://docs.gradle.org/6.7.1/samples
 */


plugins {
    id 'java'
    id("java-library")
}


allprojects {
    apply plugin: 'eclipse'
    apply plugin: 'idea'

    idea {
        module {
            downloadJavadoc = true
            downloadSources = true
        }
    }

    // 指定并安装对应版本的JDK
    java {
        toolchain {
            languageVersion.set(JavaLanguageVersion.of(15))
        }
    }

    // 测试适配成功与否
    task isConfigure(dependsOn: 'properties') {
        doLast {
            println ">> custom properties"
            println ">> project name: " + project.name
            println ">> gradle version: " + wrapper.gradleVersion
            println ">> download Javadoc: " + idea.module.isDownloadJavadoc()
            println ">> download Source: " + idea.module.isDownloadSources()
        }
    }


    repositories {
        mavenLocal()
        jcenter()
        mavenCentral()
        gradlePluginPortal()
    }


    // https://docs.gradle.org/current/userguide/gradle_wrapper.html#sec:adding_wrapper
    wrapper {
        gradleVersion = '6.7.1'
    }

    // https://docs.gradle.org/current/dsl/org.gradle.api.tasks.javadoc.Javadoc.html
    javadoc {
        source = sourceSets.main.allJava
//        classpath = configurations.compile
        failOnError = false
    }

}